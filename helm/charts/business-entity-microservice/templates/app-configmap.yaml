apiVersion: v1
kind: ConfigMap
metadata: 
  name: {{ printf "%s-rp-businessentity-app-cm" .Release.Name }}
  namespace: {{ include "business-entity-microservice.namespace" . }}
  labels:
{{- include "business-entity-microservice.labels" . | nindent 4 }}
data:
  application.yaml: |
{{- tpl (.Values.app.configYaml | 
    replace "MYSQL_HOST" (printf "%s-rp-businessentity-sql-svc" .Release.Name) | 
    replace "REDIS_HOST" (printf "%s-rp-businessentity-redis-svc" .Release.Name) |
    replace "ORIGIN_URL" (include "business-entity.webURL" .) | 
    replace "ORIGIN_PORT" (include "business-entity.webPort" .) |
    replace "IAM_SVC" (include "business-entity.iamService" .) | 
    replace "IAM_PORT" (include "business-entity.iamPort" .)
  ) . | nindent 4 
}}
